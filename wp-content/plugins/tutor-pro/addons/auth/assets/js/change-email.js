(()=>{"use strict";function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.toStringTag||"@@toStringTag";function a(t,o,i,u){var a=o&&o.prototype instanceof f?o:f,s=Object.create(a.prototype);return r(s,"_invoke",function(t,r,o){var i,u,a,f=0,s=o||[],l=!1,p={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function t(r,n){return i=r,u=0,a=e,p.n=n,c}};function v(t,r){for(u=t,a=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],v=p.p,y=i[2];t>3?(o=y===r)&&(a=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=v&&((o=t<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=t<3||i[0]>r||r>y)&&(i[4]=t,i[5]=r,p.n=y,u=0))}if(o||t>1)return c;throw l=!0,r}return function(o,s,y){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,y),u=s,a=y;(n=u<2?e:a)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,a)):p.n=a:p.v=a);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,u<2&&(u=0)}else 1===u&&(n=i["return"])&&n.call(i),u<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((n=(l=p.n<0)?a:t.call(r,p))!==c)break}catch(t){i=e,u=1,a=t}finally{f=1}}return{value:n,done:l}}}(t,i,u),!0),s}var c={};function f(){}function s(){}function l(){}n=Object.getPrototypeOf;var p=[][i]?n(n([][i]())):(r(n={},i,function(){return this}),n),v=l.prototype=f.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,r(t,u,"GeneratorFunction")),t.prototype=Object.create(v),t}return s.prototype=l,r(v,"constructor",l),r(l,"constructor",s),s.displayName="GeneratorFunction",r(l,u,"GeneratorFunction"),r(v),r(v,u,"Generator"),r(v,i,function(){return this}),r(v,"toString",function(){return"[object Generator]"}),(t=function t(){return{w:a,m:y}})()}function r(t,e,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}r=function t(e,n,o,u){function a(t,n){r(e,t,function(r){return this._invoke(t,n,r)})}n?i?i(e,n,{value:o,enumerable:!u,configurable:!u,writable:!u}):e[n]=o:(a("next",0),a("throw",1),a("return",2))},r(t,e,n,o)}function e(t,r,e,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var r=this,n=arguments;return new Promise(function(o,i){var u=t.apply(r,n);function a(t){e(u,o,i,a,c,"next",t)}function c(t){e(u,o,i,a,c,"throw",t)}a(void 0)})}}function o(t){return i.apply(this,arguments)}function i(){i=n(t().m(function r(e){var n,o;return t().w(function(t){while(1)switch(t.p=t.n){case 0:t.p=0;t.n=1;return fetch(window._tutorobject.ajaxurl,{method:"POST",body:e});case 1:n=t.v;return t.a(2,n);case 2:t.p=2;o=t.v;tutor_toast(__("Operation failed","tutor-pro"),o,"error");case 3:return t.a(2)}},r,null,[[0,2]])}));return i.apply(this,arguments)}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,n,o,i){var u=n&&n.prototype instanceof f?n:f,s=Object.create(u.prototype);return a(s,"_invoke",function(e,n,o){var i,u,a,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function r(e,n){return i=e,u=0,a=t,p.n=n,c}};function v(e,n){for(u=e,a=n,r=0;!l&&f&&!o&&r<s.length;r++){var o,i=s[r],v=p.p,y=i[2];e>3?(o=y===n)&&(a=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=n,p.n=i[1]):v<y&&(o=e<3||i[0]>n||n>y)&&(i[4]=e,i[5]=n,p.n=y,u=0))}if(o||e>1)return c;throw l=!0,n}return function(o,s,y){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,y),u=s,a=y;(r=u<2?t:a)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,a)):p.n=a:p.v=a);try{if(f=2,i){if(u||(o="next"),r=i[o]){if(!(r=r.call(i,a)))throw TypeError("iterator result is not an object");if(!r.done)return r;a=r.value,u<2&&(u=0)}else 1===u&&(r=i["return"])&&r.call(i),u<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((r=(l=p.n<0)?a:e.call(n,p))!==c)break}catch(r){i=t,u=1,a=r}finally{f=1}}return{value:r,done:l}}}(e,o,i),!0),s}var c={};function f(){}function s(){}function l(){}r=Object.getPrototypeOf;var p=[][n]?r(r([][n]())):(a(r={},n,function(){return this}),r),v=l.prototype=f.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,a(t,o,"GeneratorFunction")),t.prototype=Object.create(v),t}return s.prototype=l,a(v,"constructor",l),a(l,"constructor",s),s.displayName="GeneratorFunction",a(l,o,"GeneratorFunction"),a(v),a(v,o,"Generator"),a(v,n,function(){return this}),a(v,"toString",function(){return"[object Generator]"}),(u=function t(){return{w:i,m:y}})()}function a(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function t(r,e,n,i){function u(t,e){a(r,t,function(r){return this._invoke(t,e,r)})}e?o?o(r,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):r[e]=n:(u("next",0),u("throw",1),u("return",2))},a(t,r,e,n)}function c(t,r,e,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var r=this,e=arguments;return new Promise(function(n,o){var i=t.apply(r,e);function u(t){c(i,n,o,u,a,"next",t)}function a(t){c(i,n,o,u,a,"throw",t)}u(void 0)})}}var s=function t(r){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"yyyy-MM-dd HH:mm:ss";var n=r.getTimezoneOffset();var o=addMinutes(r,n);return format(o,e)};var l=function t(r){var e=new Date(r);var n=e.getTimezoneOffset();return addMinutes(e,-n)};var p=function t(r){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)};function v(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=new FormData;Object.keys(t).forEach(function(e){return r.set(e,t[e])});r.set(window.tutor_get_nonce_data(true).key,window.tutor_get_nonce_data(true).value);return r}function y(t){return d.apply(this,arguments)}function d(){d=f(u().m(function t(r){var e,n;return u().w(function(t){while(1)switch(t.p=t.n){case 0:t.p=0;t.n=1;return fetch(window._tutorobject.ajaxurl,{method:"POST",body:r});case 1:e=t.v;return t.a(2,e);case 2:t.p=2;n=t.v;tutor_toast(__("Operation failed","tutor-pro"),n,"error");case 3:return t.a(2)}},t,null,[[0,2]])}));return d.apply(this,arguments)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,n,o,i){var c=n&&n.prototype instanceof a?n:a,f=Object.create(c.prototype);return b(f,"_invoke",function(e,n,o){var i,a,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function r(e,n){return i=e,a=0,c=t,p.n=n,u}};function v(e,n){for(a=e,c=n,r=0;!l&&f&&!o&&r<s.length;r++){var o,i=s[r],v=p.p,y=i[2];e>3?(o=y===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(a=0,p.v=n,p.n=i[1]):v<y&&(o=e<3||i[0]>n||n>y)&&(i[4]=e,i[5]=n,p.n=y,a=0))}if(o||e>1)return u;throw l=!0,n}return function(o,s,y){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,y),a=s,c=y;(r=a<2?t:c)||!l;){i||(a?a<3?(a>1&&(p.n=-1),v(a,c)):p.n=c:p.v=c);try{if(f=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=i["return"])&&r.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((r=(l=p.n<0)?c:e.call(n,p))!==u)break}catch(r){i=t,a=1,c=r}finally{f=1}}return{value:r,done:l}}}(e,o,i),!0),f}var u={};function a(){}function c(){}function f(){}r=Object.getPrototypeOf;var s=[][n]?r(r([][n]())):(b(r={},n,function(){return this}),r),l=f.prototype=a.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,b(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,b(l,"constructor",f),b(f,"constructor",c),c.displayName="GeneratorFunction",b(f,o,"GeneratorFunction"),b(l),b(l,o,"Generator"),b(l,n,function(){return this}),b(l,"toString",function(){return"[object Generator]"}),(h=function t(){return{w:i,m:p}})()}function b(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}b=function t(r,e,n,i){function u(t,e){b(r,t,function(r){return this._invoke(t,e,r)})}e?o?o(r,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):r[e]=n:(u("next",0),u("throw",1),u("return",2))},b(t,r,e,n)}function m(t,r,e,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function w(t){return function(){var r=this,e=arguments;return new Promise(function(n,o){var i=t.apply(r,e);function u(t){m(i,n,o,u,a,"next",t)}function a(t){m(i,n,o,u,a,"throw",t)}u(void 0)})}}var g=wp.i18n.__;var _=document.getElementById("tutor-change-email-modal");if(_){_.addEventListener("submit",function(){var t=w(h().m(function t(r){var e,n,i,u,a,c,f;return h().w(function(t){while(1)switch(t.p=t.n){case 0:r.preventDefault();e=_.querySelector('button[type="submit"]');n=new FormData(r.target);i=n.get("new_email");u=n.get("new_email_confirmation");if(p(i)){t.n=1;break}tutor_toast(g("Sorry","tutor-pro"),g("Please enter a valid email","tutor-pro"),"error");return t.a(2);case 1:if(!(i!==u)){t.n=2;break}tutor_toast(g("Sorry","tutor-pro"),g("New email and confirm new email do not match","tutor-pro"),"error");return t.a(2);case 2:e.disabled=true;e.classList.add("is-loading");t.p=3;t.n=4;return o(n);case 4:a=t.v;t.n=5;return a.json();case 5:c=t.v;if(a.ok){tutor_toast(g("Success","tutor-pro"),c.message,"success");setTimeout(function(){return window.location.reload(true)},1e3)}else{tutor_toast(g("Failed","tutor-pro"),c.message,"error")}t.n=7;break;case 6:t.p=6;f=t.v;tutor_toast(g("Failed","tutor-pro"),f.message,"error");case 7:t.p=7;e.disabled=false;e.classList.remove("is-loading");return t.f(7);case 8:return t.a(2)}},t,null,[[3,6,7,8]])}));return function(r){return t.apply(this,arguments)}}())}})();